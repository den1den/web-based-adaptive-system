<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:gale="http://gale.tue.nl/adaptation">
<body>
<gale:object data="../header.xhtml" type="text/aha">
	<p><b>Warning:</b> If you see this text it means you are not
	viewing the page through the AHA! system.</p>
</gale:object>

<h2>Conditional Inclusion of Objects</h2>

<p>AHA! 3.0 introduces a new use of the standard XHTML <tt>&lt;object&gt;</tt>
tag: the conditional inclusion of (XML) files. Unlike with the <gale:a
	href="headerfooter">headers and footers</gale:a> that are
unconditionally included, the conditional objects use the <tt>&lt;object&gt;</tt>
tag with a <tt>name</tt> attribute referring to a concept and the <tt>text/aha</tt>
object type. An example:</p>
<pre>
&lt;object name="tutorial.conditionalobject" type="text/aha"&gt;
</pre>
or also
<pre>
&lt;object name="conditionalobject" type="text/aha"&gt;
</pre>
In the second case the concept
<tt>conditionalobject</tt>
is assumed to belong to the current application.

<p>Using the authoring tools for the <gale:a href="domainmodel">domain model</gale:a>
you can create a list of pairs of Boolean expressions and files, such
that the (first) expression in the list that is "true" determines which
file will be included in the page, at the place where the <tt>object</tt>
tag appears in the source. Note that in the <a
	href="/aha/tutorial/images/resources.gif" target="_blank">dialog
box for assigning resources</a> to these expressions the symbol for &gt; is
&gt; whereas in an XML representation (as generated by the authoring
tools) the symbol for &gt; would be &amp;gt;.</p>

<p>A conditionally included file (through the <tt>object</tt> tag)
must be an XML fragment with one root element. It is inserted into the
parse stream of the page in which it is included. The file may contain <tt>object</tt>
tags itself, causing more conditionally included objects to be
considered.</p>

<p>Conditional objects stimulate reuse of information. When the same
information has to be (conditionally) included in several pages you need
to create the objects to be included only once, and also the rules that
determine which file to include exist in only one place.</p>

<p>When an object is included, the access to its concept causes the
<gale:object name="adaptationrule" /> <gale:a href="rules">rules</gale:a>
associated with that concept to be triggered. This generates <gale:a
	href="usermodel">user
model</gale:a> updates, that in turn influence how the remainder of the page is
adapted. When these rules not only evaluate which file to include but
indeed do generate user model updates, it can cause strange adaptation
effects because the part of the page above the object and the part below
the object are adapted to a different user model state.</p>

<p>Objects do not necessarily refer to larger portions of
conditionally included content. In this tutorial for instance, we use a
conditional object wherever the term "<gale:object name="adaptationrule" />
rule" appears. The two alternative presentations are XML files, one
containing <tt>&lt;span&gt;adaptation&lt;/span&gt;</tt> and the other
one containing <tt>&lt;span&gt;event-condition-action&lt;/span&gt;</tt>.
Which version the end-user sees depends on the condition <tt>tutorial.rules.knowledge&amp;gt;50</tt>.
At the time of this writing this example of a conditional object is used
20 times in the tutorial, so it is a nice example of reuse.</p>

<p>Note: Currently there is a limitation in AHA! that causes the
conditional inclusion of objects not to work within a link anchor. (So
the link anchor text cannot contain a conditionally included object.)
This will be fixed in the future.</p>

<object data="../footer.xhtml" type="text/aha">
	<p><b>Warning:</b> If you see this text it means you are not
	viewing the page through the AHA! system.</p>
</object>
</body>
</html>
